# 8.1 ESLint를 활용한 정적 코드 분석

## 8.1.1 ESLint 살펴보기

**ESLint는 어떻게 코드를 분석할까?**  
ESLint는 자바스크립트 코드를 정적 분석해 잠재적인 문제를 발견하고 수정까지 도와주는 도구입니다. ESLint의 분석 과정은 다음과 같습니다:

1. 자바스크립트 코드를 문자열로 읽는다.
2. 자바스크립트 코드를 분석할 수 있는 파서(parser)로 코드를 구조화한다.
3. 구조화한 트리를 AST(Abstract Syntax Tree)라고 하며, 이 트리를 기준으로 각종 규칙과 대조한다.
4. 규칙을 위반한 코드를 알리거나(report) 수정한다(fix).

ESLint는 기본적으로 `espree` 파서를 사용합니다.

### espree의 분석 및 구조화된 결과

#### JavaScript 코드 예시

```javascript
function hello(str) {}

{
  "type": "Program",
  "start": 0,
  "end": 22,
  "range": [0, 22],
  "body": [
    {
      "type": "FunctionDeclaration",
      "start": 0,
      "end": 22,
      "range": [0, 22],
      "id": {
        "type": "Identifier",
        ...
      },
      ...
      "async": false,
      "params": [
        {
          ...
        }
      ]
      ...
    }
  ],
  "sourceType": "module"
}
```

## 8.1.2 eslint-plugin과 eslint-config

#### eslint-plugin: 규칙을 모아놓은 패키지. 예: eslint-plugin-import, eslint-plugin-react.

#### eslint-config: 여러 eslint-plugin을 모아 세트로 제공하는 패키지. 예: eslint-config-airbnb, @titicaca/triple-config-kit.

### 8.1.3 나만의 ESLint 규칙 만들기

조직 내 규칙을 추가할 때는 사용자 정의 eslint-config를 설정할 수 있습니다.

### 8.1.4 주의할 점

Prettier와의 충돌: 포매팅은 Prettier, 분석은 ESLint에 할당하여 충돌을 피할 수 있습니다.
규칙에 대한 예외 처리: 특정 코드에서 eslint-disable 주석으로 규칙을 임시로 제외할 수 있습니다.
ESLint 버전 충돌: 사용 중인 eslint-config, eslint-plugin이 호환되는지 확인해야 합니다.

# 8.2 리액트 팀이 권장하는 리액트 테스트 라이브러리

프런트엔드 테스트는 의도대로 작동하는지 확인하는 블랙박스 테스트에 초점이 맞춰져 있습니다.

## 8.2.1 React Testing Library란?

React Testing Library는 DOM Testing Library 기반으로, 리액트 컴포넌트가 기대한 대로 렌더링되는지 확인하는 도구입니다.

## 8.2.2 자바스크립트 테스트의 기초

```javascript
function sum(a, b) {
  return a + b;
}

// 테스트
let actual = sum(1, 2);
let expected = 3;

if (expected !== actual) {
  throw new Error(`${expected} is not equal to ${actual}`);
}
```

Jest를 통해 간결하게 테스트를 작성할 수 있습니다:

```javascript
const { sum } = require("./math");

test("두 인수가 덧셈이 되어야 한다.", () => {
  expect(sum(1, 2)).toBe(3);
});
```

## 8.2.3 리액트 컴포넌트 테스트 코드 작성하기

리액트 컴포넌트 테스트 순서
컴포넌트를 렌더링한다.
특정 액션을 수행한다.
기대 결과와 실제 결과를 비교한다.

### 주요 메소드

getBy...: 조건에 맞는 요소 반환

findBy...: 비동기 액션 이후 요소를 찾을 때 사용

queryBy...: 찾지 못하면 null 반환

8.2.4 사용자 정의 훅 테스트하기

## 8.2.5 테스트를 작성하기에 앞서 고려해야 할 점

테스트 커버리지는 중요 부분을 우선으로 설정하고, 실무에서는 애플리케이션에서 가장 취약한 부분에 우선순위를 둡니다.

## 8.2.6 그 밖에 해볼 만한 여러 가지 테스트

유닛 테스트 (Unit Test): 독립된 컴포넌트 테스트
통합 테스트 (Integration Test): 여러 컴포넌트가 기능으로 작동하는지 테스트
엔드 투 엔드 테스트 (End to End Test): 애플리케이션 전체적인 기능을 테스트합니다. E2E 테스트는 Cypress 같은 라이브러리를 사용합니다.
